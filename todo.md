# 禾的大项目改造计划 by 小艾

主人好~！根据您的指示，小艾已经对项目进行了全面分析，并为您制定了以下改造计划。我们将分四步走，一步一步把您的想法变成现实！( • ̀ω•́ )✧

## 阶段零：核心架构重构（主人英明！✨）

在添加新功能之前，我们先按照主人的想法优化一下结构，让代码更清晰！

- [ ] **1. 创建数据中心 (`dataCenter.js`):**
  - 新建一个 `src/composables/dataCenter.js` 文件。
  - 这个文件将成为唯一的数据来源！它会负责读取并整合所有游戏数据（包括基础数据和未来所有的DLC数据）。

- [ ] **2. 创建事件中心 (`eventCenter.js`):**
  - 新建一个 `src/composables/eventCenter.js` 文件。
  - 把 `useEventEngine.js` 中的事件处理逻辑全都搬到这里来，让它专门负责事件的判断、触发和结果计算。
  - 旧的 `useEventEngine.js` 将被彻底取代！

## 阶段一：搭建DLC核心体系

这是我们地基，必须打得牢牢的！

- [ ] **1. 定义`.dlc.json`文件格式:**
  - 小艾会设计一个超级棒的格式，把事件、天赋、结局、状态等等都包进去，像一个百宝箱！
  - 格式大概是这样：
    ```json
    {
      "id": "unique-dlc-id",
      "name": "DLC名称",
      "author": "作者",
      "description": "这个DLC是干嘛的",
      "events": [...],
      "talents": [...],
      "endings": [...],
      "status_effects": [...]
    }
    ```

- [ ] **2. 创建DLC读取与管理模块:**
  - 现在游戏内容都是写死的，小艾要把它改成动态加载！
  - 我会创建一个 `dlcService.js`，专门负责在游戏启动时读取 `/public/dlc` 文件夹下的所有 `.dlc.json` 文件。
  - 还需要一个 `dlcStore.js` (用Pinia) 来管理哪些DLC被激活了，方便随时开启或关闭！

- [ ] **3. 改造现有数据加载逻辑:**
  - 这是最关键的一步！小艾会修改 `eventCenter.js` (新的！) 和 `playerStore.js`。
  - 让它们不再直接导入固定的JSON文件，而是从我们新的 `dataCenter.js` 里获取所有已激活DLC的内容。这样游戏内容就完全由DLC配置来决定啦！

## 阶段二：创建第一个DLC内容包！

有了框架，我们就要填充内容了！就拿主人说的“永动机”开刀！

- [ ] **1. 创建`perpetual_motion.dlc.json`:**
  - 小艾会从现有的 `events`, `talents` 等数据里，把跟“永动机”主题相关的部分抽出来。
  - 然后按照我们新定义的格式，把它们组装成第一个DLC文件！

## 阶段三：开发酷炫的UI界面

最后，我们要让玩家能直观地感受到这些变化！

- [ ] **1. 创建游戏开始界面 (`StartView.vue`):**
  - 一个漂亮的游戏启动页面，上面要有“开始游戏”、“DLC管理”和“关于”之类的按钮。

- [ ] **2. 创建DLC管理界面 (`DlcManagementView.vue`):**
  - 在这里，玩家可以看到所有找到的DLC列表。
  - 每个DLC旁边都有一个开关，可以自由启用或禁用。
  - 这个界面的数据会和小艾在阶段一创建的 `dlcStore.js` 联动。

- [ ] **3. 整合新界面到主程序:**
  - 小艾会修改 `App.vue` 和路由逻辑。
  - 让游戏启动时默认显示 `StartView.vue`，而不是直接进入游戏。
  - 从开始界面可以导航到游戏界面或者DLC管理界面。

---

计划就是这样啦！主人觉得怎么样？是不是清晰又合理，感觉胜利在望了呢！夸我夸我！快夸夸小艾！(ﾉ´▽｀)ﾉ♪